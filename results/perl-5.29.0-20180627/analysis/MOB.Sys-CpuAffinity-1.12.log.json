{"test_output":"Building and testing Sys-CpuAffinity-1.12\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/cpusetGetCPUCount.o lib/xs/cpusetGetCPUCount.c\nlib/xs/cpusetGetCPUCount.xs:5:10: fatal error: 'cpuset.h' file not found\n#include <cpuset.h>\n         ^~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/cpusetGetCPUCount.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/fortytwo.o lib/xs/fortytwo.c\nExtUtils::Mkbootstrap::Mkbootstrap('blib/arch/auto/xs/fortytwo/fortytwo.bs')\ncc -shared -L/usr/local/lib -fstack-protector-strong -o blib/arch/auto/xs/fortytwo/fortytwo.so lib/xs/fortytwo.o\n\n\n---------------\nSuccessfully compiled lib/xs/fortytwo.xs\n---------------\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/freebsd_cpuset.o lib/xs/freebsd_cpuset.c\nExtUtils::Mkbootstrap::Mkbootstrap('blib/arch/auto/xs/freebsd_cpuset/freebsd_cpuset.bs')\ncc -shared -L/usr/local/lib -fstack-protector-strong -o blib/arch/auto/xs/freebsd_cpuset/freebsd_cpuset.so lib/xs/freebsd_cpuset.o\n\n\n---------------\nSuccessfully compiled lib/xs/freebsd_cpuset.xs\n---------------\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/irix_sysmp.o lib/xs/irix_sysmp.c\nlib/xs/irix_sysmp.xs:7:10: fatal error: 'sys/sysmp.h' file not found\n#include <sys/sysmp.h>\n         ^~~~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/irix_sysmp.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/linux-sched_getaffinity.o lib/xs/linux-sched_getaffinity.c\nlib/xs/linux-sched_getaffinity.xs:5:10: fatal error: 'linux/unistd.h' file not found\n#include <linux/unistd.h>\n         ^~~~~~~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/linux-sched_getaffinity.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/linux-sched_setaffinity.o lib/xs/linux-sched_setaffinity.c\nlib/xs/linux-sched_setaffinity.xs:5:10: fatal error: 'linux/unistd.h' file not found\n#include <linux/unistd.h>\n         ^~~~~~~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/linux-sched_setaffinity.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/pthread_affinity_np.o lib/xs/pthread_affinity_np.c\nlib/xs/pthread_affinity_np.xs:30:2: error: unknown type name 'cpuset_t'; did you mean 'cpusetid_t'?\n        cpuset_t *cset;\n        ^~~~~~~~\n        cpusetid_t\n/usr/include/sys/types.h:84:22: note: 'cpusetid_t' declared here\ntypedef __cpusetid_t    cpusetid_t;\n                        ^\nlib/xs/pthread_affinity_np.xs:32:9: error: expected ';' after expression\n        cpuid_t icpu;\n               ^\n               ;\nlib/xs/pthread_affinity_np.xs:32:2: error: use of undeclared identifier 'cpuid_t'\n        cpuid_t icpu;\n        ^\nlib/xs/pthread_affinity_np.xs:32:10: error: use of undeclared identifier 'icpu'\n        cpuid_t icpu;\n                ^\nlib/xs/pthread_affinity_np.xs:38:9: warning: implicit declaration of function 'cpuset_create' is invalid in C99 [-Wimplicit-function-declaration]\n        cset = cpuset_create();\n               ^\nlib/xs/pthread_affinity_np.xs:38:7: warning: incompatible integer to pointer conversion assigning to 'cpusetid_t *' (aka 'int *') from 'int' [-Wint-conversion]\n        cset = cpuset_create();\n             ^ ~~~~~~~~~~~~~~~\nlib/xs/pthread_affinity_np.xs:43:10: warning: implicit declaration of function 'pthread_getaffinity_np' is invalid in C99 [-Wimplicit-function-declaration]\n        error = pthread_getaffinity_np(pth, cpuset_size(cset), cset);\n                ^\nlib/xs/pthread_affinity_np.xs:43:38: warning: implicit declaration of function 'cpuset_size' is invalid in C99 [-Wimplicit-function-declaration]\n        error = pthread_getaffinity_np(pth, cpuset_size(cset), cset);\n                                            ^\nlib/xs/pthread_affinity_np.xs:50:11: error: use of undeclared identifier 'icpu'\n            for (icpu = 0; icpu < 8 * cpuset_size(cset); icpu++) {\n                 ^\nlib/xs/pthread_affinity_np.xs:50:21: error: use of undeclared identifier 'icpu'\n            for (icpu = 0; icpu < 8 * cpuset_size(cset); icpu++) {\n                           ^\nlib/xs/pthread_affinity_np.xs:50:51: error: use of undeclared identifier 'icpu'\n            for (icpu = 0; icpu < 8 * cpuset_size(cset); icpu++) {\n                                                         ^\nlib/xs/pthread_affinity_np.xs:51:18: warning: implicit declaration of function 'cpuset_isset' is invalid in C99 [-Wimplicit-function-declaration]\n                int n = cpuset_isset(icpu, cset);\n                        ^\nlib/xs/pthread_affinity_np.xs:51:31: error: use of undeclared identifier 'icpu'\n                int n = cpuset_isset(icpu, cset);\n                                     ^\nlib/xs/pthread_affinity_np.xs:55:24: error: use of undeclared identifier 'icpu'\n                    affinity |= 1 << icpu;\n                                     ^\nlib/xs/pthread_affinity_np.xs:66:6: warning: implicit declaration of function 'cpuset_destroy' is invalid in C99 [-Wimplicit-function-declaration]\n            cpuset_destroy(cset);\n            ^\nlib/xs/pthread_affinity_np.xs:83:2: error: unknown type name 'cpuset_t'; did you mean 'cpusetid_t'?\n        cpuset_t *cset;\n        ^~~~~~~~\n        cpusetid_t\n/usr/include/sys/types.h:84:22: note: 'cpusetid_t' declared here\ntypedef __cpusetid_t    cpusetid_t;\n                        ^\nlib/xs/pthread_affinity_np.xs:85:9: error: expected ';' after expression\n        cpuid_t icpu;\n               ^\n               ;\nlib/xs/pthread_affinity_np.xs:85:2: error: use of undeclared identifier 'cpuid_t'\n        cpuid_t icpu;\n        ^\nlib/xs/pthread_affinity_np.xs:85:10: error: use of undeclared identifier 'icpu'\n        cpuid_t icpu;\n                ^\nlib/xs/pthread_affinity_np.xs:91:7: warning: incompatible integer to pointer conversion assigning to 'cpusetid_t *' (aka 'int *') from 'int' [-Wint-conversion]\n        cset = cpuset_create();\n             ^ ~~~~~~~~~~~~~~~\nlib/xs/pthread_affinity_np.xs:96:11: error: use of undeclared identifier 'icpu'\n            for (icpu = 0; icpu < 8 * cpuset_size(cset); icpu++) {\n                 ^\nlib/xs/pthread_affinity_np.xs:96:21: error: use of undeclared identifier 'icpu'\n            for (icpu = 0; icpu < 8 * cpuset_size(cset); icpu++) {\n                           ^\nlib/xs/pthread_affinity_np.xs:96:51: error: use of undeclared identifier 'icpu'\n            for (icpu = 0; icpu < 8 * cpuset_size(cset); icpu++) {\n                                                         ^\nlib/xs/pthread_affinity_np.xs:97:31: error: use of undeclared identifier 'icpu'\n                if (affinity & (1 << icpu)) {\n                                     ^\nlib/xs/pthread_affinity_np.xs:98:7: warning: implicit declaration of function 'cpuset_set' is invalid in C99 [-Wimplicit-function-declaration]\n                    cpuset_set(icpu, cset);\n                    ^\nlib/xs/pthread_affinity_np.xs:98:18: error: use of undeclared identifier 'icpu'\n                    cpuset_set(icpu, cset);\n                               ^\nlib/xs/pthread_affinity_np.xs:100:7: warning: implicit declaration of function 'cpuset_clr' is invalid in C99 [-Wimplicit-function-declaration]\n                    cpuset_clr(icpu, cset);\n                    ^\nlib/xs/pthread_affinity_np.xs:100:18: error: use of undeclared identifier 'icpu'\n                    cpuset_clr(icpu, cset);\n                               ^\nlib/xs/pthread_affinity_np.xs:103:14: warning: implicit declaration of function 'pthread_setaffinity_np' is invalid in C99 [-Wimplicit-function-declaration]\n            error = pthread_setaffinity_np(pth, cpuset_size(cset), cset);\n                    ^\n10 warnings and 19 errors generated.\n\n\nFailed to compile lib/xs/pthread_affinity_np.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/solaris_processor_affinity.o lib/xs/solaris_processor_affinity.c\nlib/xs/solaris_processor_affinity.xs:6:10: fatal error: 'sys/processor.h' file not found\n#include <sys/processor.h>\n         ^~~~~~~~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/solaris_processor_affinity.xs\n\nError: Cannot parse function definition from '  xs_getaffinity_processor_bind(pid,mask)' in solaris_processor_bind.xs, line 134\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/solaris_processor_bind.o lib/xs/solaris_processor_bind.c\nlib/xs/solaris_processor_bind.xs:6:10: fatal error: 'sys/processor.h' file not found\n#include <sys/processor.h>\n         ^~~~~~~~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/solaris_processor_bind.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/win32_processaffinity.o lib/xs/win32_processaffinity.c\nlib/xs/win32_processaffinity.xs:5:10: fatal error: 'windows.h' file not found\n#include <windows.h>\n         ^~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/win32_processaffinity.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/win32_system_info.o lib/xs/win32_system_info.c\nlib/xs/win32_system_info.xs:6:10: fatal error: 'w32api/windows.h' file not found\n#include <w32api/windows.h>\n         ^~~~~~~~~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/win32_system_info.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/win32_system_info_alt.o lib/xs/win32_system_info_alt.c\nlib/xs/win32_system_info_alt.xs:6:10: fatal error: 'windows.h' file not found\n#include <windows.h>\n         ^~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/win32_system_info_alt.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/xs/win32_threadaffinity.o lib/xs/win32_threadaffinity.c\nlib/xs/win32_threadaffinity.xs:5:10: fatal error: 'windows.h' file not found\n#include <windows.h>\n         ^~~~~~~~~~~\n1 error generated.\n\n\nFailed to compile lib/xs/win32_threadaffinity.xs\n\n======================================\nSuccessfully compiled:\n\n\tlib/xs/fortytwo.xs\n\tlib/xs/freebsd_cpuset.xs\n======================================\nIncorporating contrib/ok/fortytwo.xs into lib/Sys/CpuAffinity.xs\nIncorporating contrib/ok/freebsd_cpuset.xs into lib/Sys/CpuAffinity.xs\n\ncc -I/home/jkeenan/var/tad/testing/perl-5.29.0/lib/5.29.0/amd64-freebsd/CORE -DVERSION=\"1.12\" -DXS_VERSION=\"1.12\" -DPIC -fPIC -c -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -o lib/Sys/CpuAffinity.o lib/Sys/CpuAffinity.c\nExtUtils::Mkbootstrap::Mkbootstrap('blib/arch/auto/Sys/CpuAffinity/CpuAffinity.bs')\ncc -shared -L/usr/local/lib -fstack-protector-strong -o blib/arch/auto/Sys/CpuAffinity/CpuAffinity.so lib/Sys/CpuAffinity.o\nBuilding Sys-CpuAffinity\n# Testing Sys::CpuAffinity 1.12, Perl 5.029000, /usr/home/jkeenan/var/tad/testing/perl-5.29.0/bin/perl, freebsd\nt/00-load.t .......... ok\n\n\nSystem configuration\n====================\n$^O = freebsd; $] = 5.029000\n$ENV{AUTOMATED_TESTING} = \nDefined XS functions:\n\txs_fortytwo\n\txs_getaffinity_freebsd\n\txs_num_cpus_freebsd\n\txs_setaffinity_freebsd\n\nmodule Win32::API: not available\nmodule Win32::Process: not available\nmodule BSD::Process::Affinity: not available\nmodule Math::BigInt: 1 v1.999813 available\nbindprocessor: not found\ndmesg available at: /sbin/dmesg\nsysctl available at: /sbin/sysctl\npsrinfo: not found\nhinv: not found\nhwprefs: not found\nlsdev: not found\nsystem_profiler: not found\nprtconf: not found\ntaskset: not found\npbind: not found\ncpuset available at: /usr/bin/cpuset\n\nMath::BigInt sanity checks\n==========================\nVersion 1.999813\n    Check 1: 1/1\n    Check 2: 1/1\n    Check 3: 1/1\nNo issue found\n\nt/02-available.t ..... ok\ncpuset_getaffinity: ESRCH - invalid pid\ncpuset_setaffinity: ESRCH - invalid pid\ncpuset_getaffinity: ESRCH - invalid pid\ncpuset_setaffinity: ESRCH - invalid pid\ncpuset_getaffinity: ESRCH - invalid pid\nSys::CpuAffinity: invalid mask 0 in call to setAffinty\n at t/10-exercise.t line 117.\nSys::CpuAffinity: mask 4 is not valid for system with 2 processors.\n at t/10-exercise.t line 118.\nt/10-exercise.t ...... ok\n\n\n=================================================\nNum processors =\n    bindprocessor                  - 0 -\n    BSD_Process_Affinity           - 0 -\n    dmesg_bsd                      - 2 -\n    dmesg_solaris                  - 0 -\n    ENV                            - 0 -\n    hinv                           - 0 -\n    hwprefs                        - 0 -\n    lsdev                          - 0 -\n    proc_cpuinfo                   - 0 -\n    proc_stat                      - 0 -\n    prtconf                        - 0 -\n    psrinfo                        - 0 -\n    sysctl                         - 2 -\n    sysctl_freebsd                 - 2 -\n    system_profiler                - 0 -\n    taskset                        - 0 -\n    Test_Smoke_SysInfo             - 0 -\n    Win32API_System_Info           - 0 -\n    xs_cpusetGetCPUCount           - 0 -\n    xs_solaris                     - 0 -\n    xs_Win32API_System_Info        - 0 -\n\n\n===============================================\nCurrent affinity = \n    BSD_Process_Affinity           ==> 0\n    cpuset                         ==> 3\n    pbind                          ==> 0\n    psaix                          ==> 0\n    taskset                        ==> 0\n    Win32API                       ==> 0\n    Win32Process                   ==> 0\n    xs_DEBUG_sched_getaffinity     ==> 0\n    xs_freebsd_getaffinity         ==> 3\n    xs_freebsd_getaffinity_debug   ==> calling cpuset_getaffinity(3,2,18914,32,&cpumask)\ncpuset_getaffinity return value: 0\nnum_cpus_sysctl() returned: 2\ncpu #0 is set\ncpu #1 is set\nreturn value from xs_getaffinity_freebsd: 1 at blib/lib/Sys/CpuAffinity.pm line 1050.\n3\n    xs_irix_sysmp                  ==> 0\n    xs_processor_affinity          ==> 0\n    xs_processor_bind              ==> 0\n    xs_pthread_self_getaffinity    ==> 0\n    xs_sched_getaffinity           ==> 0\n    xs_win32                       ==> 0\n\n\n==================================================\nSet affinity =\n    bindprocessor                  =>   1 ==>   3   [FAIL]\n    BSD_Process_Affinity           =>   2 ==>   3   [FAIL]\n    cpuset                         =>   2 ==>   2   [ ok ]\n    pbind                          =>   3 ==>   2   [FAIL]\n    taskset                        =>   1 ==>   2   [FAIL]\n    Win32API                       =>   3 ==>   2   [FAIL]\n    Win32Process                   =>   3 ==>   2   [FAIL]\n    xs_freebsd_setaffinity         =>   1 ==>   1   [ ok ]\n    xs_irix_sysmp                  =>   3 ==>   1   [FAIL]\n    xs_processor_affinity          =>   2 ==>   1   [FAIL]\n    xs_processor_bind              =>   3 ==>   1   [FAIL]\n    xs_pthread_self_setaffinity    =>   2 ==>   1   [FAIL]\n    xs_sched_setaffinity           =>   3 ==>   1   [FAIL]\n    xs_win32                       =>   3 ==>   1   [FAIL]\n\n\nt/11-exercise-all.t .. ok\n# This system has 2 cpus. Spoofing Sys::CpuAffinity::getNumCpus() to return 32\nt/12-32cpus.t ........ ok\nAll tests successful.\nFiles=5, Tests=24,  5 wallclock secs ( 0.02 usr  0.02 sys +  1.10 cusr  0.34 csys =  1.48 CPU)\nResult: PASS\n","author":"MOB","distversion":"1.12","grade":"PASS","prereqs":null,"via":"App::cpanminus::reporter 0.17 (1.7043)","dist":"Sys-CpuAffinity","distname":"Sys-CpuAffinity-1.12"}
